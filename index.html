<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Masking Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
        body { margin: 0; cursor: crosshair; overflow: hidden; }
        #white-layer { 
            position: fixed; 
            inset: 0; 
            background-color: white; 
            z-index: 1; 
            display: grid;
            place-items: center;
            font-size: 8rem;
            font-family: sans-serif;
            color: black;
        }
        #blue-layer {
            position: fixed;
            inset: 0;
            background-color: #0040C0;
            z-index: 2;
            mask-image: var(--mask-url);
            -webkit-mask-image: var(--mask-url);
        }
    </style>
</head>
<body>
    <div id="white-layer">Hello World</div>
    <div id="blue-layer"></div>

    <script>
        const sketch = (p) => {
            let maskCanvas, blueLayer;
            p.setup = () => {
                p.noCanvas(); // We don't need a visible p5 canvas on the page
                blueLayer = document.getElementById('blue-layer');
                maskCanvas = p.createGraphics(p.windowWidth, p.windowHeight);
                maskCanvas.background(0); // Start with black mask (hides blue layer)
                updateCSSMask();
            };
            p.mouseMoved = () => {
                maskCanvas.fill(255); // Paint with white to reveal blue layer
                maskCanvas.circle(p.mouseX, p.mouseY, 200);
                updateCSSMask();
            };
             p.mousePressed = () => {
                maskCanvas.background(0); // Reset mask to black on click
                updateCSSMask();
            };
            function updateCSSMask() {
                const maskUrl = `url(${maskCanvas.elt.toDataURL()})`;
                blueLayer.style.setProperty('--mask-url', maskUrl);
            }
        };
        new p5(sketch);
    </script>
</body>
</html>
